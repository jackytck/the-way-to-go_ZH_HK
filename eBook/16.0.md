# 16 常見的陷阱與錯誤

在之前的內容中，有時候使用`!!...!!`標記警告go語言中的一些錯誤使用方式。當你在程式設計時候遇到的一個困難，可以確定本書特定的章節能找到類似的主題。為了方便起見，這裏列出了一些常見陷進，以便於你能發現更多的解釋和例子：

- 永遠不要使用形如 `var p*a` 宣告變數，這會混淆指標宣告和乘法運算（參考[4.9小節](04.9.md)）
- 永遠不要在`for`迴圈自身中改變計數器變數（參考[5.4小節](05.4.md)）
- 永遠不要在`for-range`迴圈中使用一個值去改變自身的值（參考[5.4.4小節](05.4.md)）
- 永遠不要將`goto`和前置標籤一起使用（參考[5.6小節](05.6.md)）
- 永遠不要忘記在函式名（參考[第6章](06.0.md)）後加括號()，尤其呼叫一個物件的方法或者使用匿名函式啟動一個協程時
- 永遠不要使用`new()`一個map，一直使用make（參考[第8章](08.0.md)）
- 當為一個型別定義一個String()方法時，不要使用`fmt.Print`或者類似的程式碼（參考[10.7小節](10.7.md)）
- 永遠不要忘記當終止快取寫入時，使用`Flush`函式（參考[12.2.3小節](12.2.md)）
- 永遠不要忽略錯誤提示，忽略錯誤會導致程式崩潰（參考[13.1小節](13.1.md)）
- 不要使用全域性變數或者共享記憶體，這會使併發執行的程式碼變得不安全（參考[14.1小節](14.1.md)）
- `println`函式僅僅是用於除錯的目的

最佳實踐：對比以下使用方式：

- 使用正確的方式初始化一個元素是切片的對映，例如`map[type]slice`（參考[8.1.3小節](08.1.md)）
- 一直使用逗號，ok或者checked形式作為型別斷言（參考[11.3小節](11.3.md)）
- 使用一個工廠函式建立並初始化自己定義型別（參考[10.2小節](10.2.md)-[18.4小節](18.4.md)）
- 僅當一個結構體的方法想改變結構體時，使用結構體指標作為方法的接受者，否則使用一個結構體值型別[10.6.3小節](10.6.md)

本章主要彙總了go語言使用過程中最常見的錯誤和注意事項。在之前的章節已經涉及到了完整的示例和解釋，你應該做的不僅僅是閲讀這段的標題。

## 連結

- [目錄](directory.md)
- 上一章：[使用SMTP（簡單郵件傳輸協議）傳送郵件](15.12.md)
- 下一節：[誤用短宣告導致變數覆蓋](16.1.md)